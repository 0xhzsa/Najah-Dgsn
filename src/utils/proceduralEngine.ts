import { Question } from "../types";

const CAT = {
  HISTORY: "ุชุงุฑูุฎ ุงููุบุฑุจ",
  CONST: "ุฏุณุชูุฑ ููุคุณุณุงุช",
  GEO: "ุฌุบุฑุงููุง",
  LAW: "ูุงููู ููุณุทุฑุฉ ุฌูุงุฆูุฉ",
  POLICE: "ุฃุฎูุงููุงุช ุงููููุฉ ูุงูุดุฑุทุฉ",
  INTL: "ุนูุงูุงุช ุฏูููุฉ",
  GEN: "ุซูุงูุฉ ุนุงูุฉ"
};

// Types for Semantic Matching
type FactType = 'DATE' | 'NUMBER' | 'PERSON' | 'CITY' | 'TEXT' | 'LAW';

interface Fact {
    q: string;
    a: string;
    cat: string;
    exp: string;
    type: FactType;
}

// --- THE REAL DATABASE (Massive Injection: 120+ Facts) ---
const RAW_DATA: Fact[] = [
  // --- POLICE & SECURITY (The Core) ---
  { q: "ุชุฃุณุณุช ุงููุฏูุฑูุฉ ุงูุนุงูุฉ ููุฃูู ุงููุทูู (DGSN)", a: "16 ูุงู 1956", cat: CAT.POLICE, exp: "ุจููุฌุจ ุงูุธููุฑ ุงูุดุฑูู ุฑูู 1.56.115.", type: 'DATE' },
  { q: "ุงููุธุงู ุงูุฃุณุงุณู ุงูุฌุฏูุฏ ูููุธูู ุงูุฃูู ุงููุทูู", a: "2010", cat: CAT.POLICE, exp: "ุงูุธููุฑ ุงูุดุฑูู ุฑูู 1.09.213 (23 ูุจุฑุงูุฑ 2010).", type: 'DATE' },
  { q: "ุชุฃุณุณ ุงูุฏุฑู ุงููููู", a: "29 ุฃุจุฑูู 1957", cat: CAT.POLICE, exp: "ุจููุฌุจ ุงูุธููุฑ ุงูุดุฑูู 1.57.280.", type: 'DATE' },
  { q: "ุชุฃุณุณุช ุงูููุงุช ุงููุณุงุนุฏุฉ (ุงูุชูุธูู ุงูุญุงูู)", a: "1976", cat: CAT.POLICE, exp: "ุฃูุง ุงูุฃุตู (ุงููุฎุงุฒููุฉ) ููุงู ูู 1946.", type: 'DATE' },
  { q: "ุชุฃุณุณุช ุงูููุงุช ุงููุณูุญุฉ ุงูููููุฉ (FAR)", a: "14 ูุงู 1956", cat: CAT.POLICE, exp: "ูุจุงุดุฑุฉ ุจุนุฏ ุงูุงุณุชููุงู.", type: 'DATE' },
  { q: "ุงูุฑูู ุงูุฃุฎุถุฑ ููุชุจููุบ ุนู ุงูุฑุดูุฉ", a: "0800004747", cat: CAT.POLICE, exp: "ุชุงุจุน ูุฑุฆุงุณุฉ ุงูููุงุจุฉ ุงูุนุงูุฉ.", type: 'NUMBER' },
  { q: "ุฑูู ุดุฑุทุฉ ุงููุฌุฏุฉ", a: "19", cat: CAT.POLICE, exp: "ูุฌุงูู ูู ุงูุซุงุจุช ูุงููุญููู.", type: 'NUMBER' },
  { q: "ุฑูู ุงูุฏุฑู ุงููููู", a: "177", cat: CAT.POLICE, exp: "ููุทูุงุฑุฆ ุฎุงุฑุฌ ุงููุฏุงุฑ ุงูุญุถุฑู.", type: 'NUMBER' },
  { q: "ุฑูู ุงูููุงูุฉ ุงููุฏููุฉ", a: "15", cat: CAT.POLICE, exp: "ููุญุฑุงูู ูุงูุฅุณุนุงู.", type: 'NUMBER' },
  
  // Ranks
  { q: "ุฃุนูู ุฑุชุจุฉ ูู ุณูู ุงูุฃูู ุงููุทูู", a: "ูุงูู ุฃูู", cat: CAT.POLICE, exp: "ุฑุชุจุฉ ุงุณุชุซูุงุฆูุฉ (Hors รฉchelle).", type: 'TEXT' },
  { q: "ุฃูู ุฑุชุจุฉ ูู ุณูู ุงูุฃูู ุงููุทูู", a: "ุญุงุฑุณ ุฃูู", cat: CAT.POLICE, exp: "ุงูุณูู 5.", type: 'TEXT' },
  { q: "ุงูุฑุชุจุฉ ุงูุชู ุชูู 'ููุฏู ุดุฑุทุฉ'", a: "ููุฏู ุดุฑุทุฉ ุฑุฆูุณ", cat: CAT.POLICE, exp: ".", type: 'TEXT' },
  { q: "ุงูุฑุชุจุฉ ุงูุชู ุชูู 'ุถุงุจุท ุฃูู'", a: "ุถุงุจุท ุฃูู ููุชุงุฒ", cat: CAT.POLICE, exp: ".", type: 'TEXT' },
  { q: "ุงูุฑุชุจุฉ ุงูุชู ุชูู 'ุนููุฏ ุดุฑุทุฉ'", a: "ุนููุฏ ุดุฑุทุฉ ููุชุงุฒ", cat: CAT.POLICE, exp: ".", type: 'TEXT' },
  
  // --- LAW & CRIMINAL PROCEDURE ---
  { q: "ูุฏุฉ ุงูุญุฑุงุณุฉ ุงููุธุฑูุฉ ูู ุงูุฌุฑุงุฆู ุงูุนุงุฏูุฉ", a: "48 ุณุงุนุฉ", cat: CAT.LAW, exp: "ูุงุจูุฉ ููุชูุฏูุฏ ูุฑุฉ ูุงุญุฏุฉ ููุฏุฉ 24 ุณุงุนุฉ.", type: 'LAW' },
  { q: "ูุฏุฉ ุงูุญุฑุงุณุฉ ุงููุธุฑูุฉ ูู ุฌุฑุงุฆู ุฃูู ุงูุฏููุฉ", a: "96 ุณุงุนุฉ", cat: CAT.LAW, exp: "ูุงุจูุฉ ููุชูุฏูุฏ ูุฑุฉ ูุงุญุฏุฉ.", type: 'LAW' },
  { q: "ูุฏุฉ ุงูุญุฑุงุณุฉ ุงููุธุฑูุฉ ูู ุงูุฌุฑุงุฆู ุงูุฅุฑูุงุจูุฉ", a: "96 ุณุงุนุฉ", cat: CAT.LAW, exp: "ูุงุจูุฉ ููุชูุฏูุฏ ูุฑุชูู (96+96+96).", type: 'LAW' },
  { q: "ุณู ุงูุฑุดุฏ ุงูุฌูุงุฆู ูู ุงููุบุฑุจ", a: "18 ุณูุฉ", cat: CAT.LAW, exp: "ุงููุงุฏุฉ 140 ูู ุงููุงููู ุงูุฌูุงุฆู.", type: 'LAW' },
  { q: "ุชุนุชุจุฑ ุงูุฌูุงูุฉ (Crime) ุฌุฑููุฉ ูุนุงูุจ ุนูููุง ุจู", a: "ุงูุณุฌู ุฃูุซุฑ ูู 5 ุณููุงุช", cat: CAT.LAW, exp: "ุฃู ุงูุฅุนุฏุงู ุฃู ุงููุคุจุฏ.", type: 'LAW' },
  { q: "ุชุนุชุจุฑ ุงูุฌูุญุฉ (Dรฉlit) ุฌุฑููุฉ ูุนุงูุจ ุนูููุง ุจู", a: "ุงูุญุจุณ ูู ุดูุฑ ุฅูู 5 ุณููุงุช", cat: CAT.LAW, exp: "ุฃูู ูู ุดูุฑ ุชุนุชุจุฑ ูุฎุงููุฉ.", type: 'LAW' },
  { q: "ุชุชูุงุฏู ุงูุฏุนูู ุงูุนููููุฉ ูู ุงูุฌูุงูุงุช ุจูุฑูุฑ", a: "15 ุณูุฉ", cat: CAT.LAW, exp: "ูู ููู ุงุฑุชูุงุจ ุงูุฌุฑููุฉ.", type: 'LAW' },
  { q: "ุชุชูุงุฏู ุงูุฏุนูู ุงูุนููููุฉ ูู ุงูุฌูุญ ุจูุฑูุฑ", a: "4 ุณููุงุช", cat: CAT.LAW, exp: "ูู ููู ุงุฑุชูุงุจ ุงูุฌุฑููุฉ.", type: 'LAW' },
  { q: "ุชุชูุงุฏู ุงูุนููุจุฉ (ูููุณ ุงูุฏุนูู) ูู ุงูุฌูุงูุงุช ุจูุฑูุฑ", a: "20 ุณูุฉ", cat: CAT.LAW, exp: "ูู ุชุงุฑูุฎ ุตุฏูุฑ ุงูุญูู.", type: 'LAW' },
  { q: "ุถุงุจุท ุงูุดุฑุทุฉ ุงููุถุงุฆูุฉ ูููุจ ุจู", a: "OPJ", cat: CAT.LAW, exp: "Officier de Police Judiciaire.", type: 'TEXT' },
  { q: "ูุฑุฃุณ ุงูููุงุจุฉ ุงูุนุงูุฉ", a: "ุงููููู ุงูุนุงู ููููู", cat: CAT.LAW, exp: "ูุฏู ูุญููุฉ ุงูููุถ.", type: 'PERSON' },

  // --- HISTORY (Dates & Treaties) ---
  { q: "ูุคุชูุฑ ูุฏุฑูุฏ", a: "1880", cat: CAT.HISTORY, exp: "ุนุฒุฒ ุงูุญูุงูุฉ ุงูููุตููุฉ ุงูุฃุฌูุจูุฉ.", type: 'DATE' },
  { q: "ูุคุชูุฑ ุงูุฌุฒูุฑุฉ ุงูุฎุถุฑุงุก", a: "1906", cat: CAT.HISTORY, exp: "ููุฏ ููุฑุถ ุงูุญูุงูุฉ.", type: 'DATE' },
  { q: "ูุฑุถ ุงูุญูุงูุฉ ุงููุฑูุณูุฉ ุนูู ุงููุบุฑุจ", a: "30 ูุงุฑุณ 1912", cat: CAT.HISTORY, exp: "ูุนุงูุฏุฉ ูุงุณ.", type: 'DATE' },
  { q: "ูุนุฑูุฉ ุงููุฑู (ููุญุง ูุญูู ุงูุฒูุงูู)", a: "1914", cat: CAT.HISTORY, exp: "ุงูุชุตุงุฑ ุงูููุงููุฉ ุจุงูุฃุทูุณ.", type: 'DATE' },
  { q: "ูุนุฑูุฉ ุฃููุงู (ุนุจุฏ ุงููุฑูู ุงูุฎุทุงุจู)", a: "1921", cat: CAT.HISTORY, exp: "ูุฒููุฉ ุงูุฅุณุจุงู ูู ุงูุฑูู.", type: 'DATE' },
  { q: "ุชูุฏูู ูุซููุฉ ุงููุทุงูุจุฉ ุจุงูุงุณุชููุงู", a: "11 ููุงูุฑ 1944", cat: CAT.HISTORY, exp: "ุญุฒุจ ุงูุงุณุชููุงู.", type: 'DATE' },
  { q: "ุฎุทุงุจ ุทูุฌุฉ ูููุบููุฑ ูู ูุญูุฏ ุงูุฎุงูุณ", a: "9 ุฃุจุฑูู 1947", cat: CAT.HISTORY, exp: "ุชุฃููุฏ ูุญุฏุฉ ุงููุบุฑุจ.", type: 'DATE' },
  { q: "ุซูุฑุฉ ุงูููู ูุงูุดุนุจ (ููู ุงูุณูุทุงู)", a: "20 ุบุดุช 1953", cat: CAT.HISTORY, exp: "ููู ูุญูุฏ ุงูุฎุงูุณ ุฅูู ููุฑุณููุง.", type: 'DATE' },
  { q: "ุนูุฏุฉ ูุญูุฏ ุงูุฎุงูุณ ูู ุงููููู", a: "16 ูููุจุฑ 1955", cat: CAT.HISTORY, exp: "ูุจุฏุงูุฉ ุงูุงุณุชููุงู.", type: 'DATE' },
  { q: "ุนูุฏ ุงูุงุณุชููุงู", a: "18 ูููุจุฑ 1956", cat: CAT.HISTORY, exp: "ุฑุณููุงู.", type: 'DATE' },
  { q: "ููุงุฉ ูุญูุฏ ุงูุฎุงูุณ", a: "26 ูุจุฑุงูุฑ 1961", cat: CAT.HISTORY, exp: "ุชููู ุงูุญุณู ุงูุซุงูู ุงูุนุฑุด.", type: 'DATE' },
  { q: "ุฃูู ุฏุณุชูุฑ ููููููุฉ", a: "1962", cat: CAT.HISTORY, exp: "ูู ุนูุฏ ุงูุญุณู ุงูุซุงูู.", type: 'DATE' },
  { q: "ุงููุณูุฑุฉ ุงูุฎุถุฑุงุก", a: "6 ูููุจุฑ 1975", cat: CAT.HISTORY, exp: "ุงุณุชุฑุฌุงุน ุงูุณุงููุฉ ุงูุญูุฑุงุก.", type: 'DATE' },
  { q: "ุงุณุชุฑุฌุงุน ุทุฑูุงูุฉ", a: "1958", cat: CAT.HISTORY, exp: "ุจุนุฏ ุงูููุงููุฉ.", type: 'DATE' },
  { q: "ุงุณุชุฑุฌุงุน ุณูุฏู ุฅููู", a: "1969", cat: CAT.HISTORY, exp: "ููู ูุนุงูุฏุฉ.", type: 'DATE' },
  { q: "ุงุณุชุฑุฌุงุน ูุงุฏู ุงูุฐูุจ", a: "14 ุบุดุช 1979", cat: CAT.HISTORY, exp: "ุจูุนุฉ ููุฏ ูุงุฏู ุงูุฐูุจ.", type: 'DATE' },
  { q: "ุชุฃุณูุณ ุงุชุญุงุฏ ุงููุบุฑุจ ุงูุนุฑุจู", a: "1989", cat: CAT.HISTORY, exp: "ุจูุฑุงูุด.", type: 'DATE' },
  { q: "ุญูููุฉ ุงูุชูุงูุจ ุจุฑุฆุงุณุฉ ุงูููุณูู", a: "1998", cat: CAT.HISTORY, exp: "ูุญุทุฉ ุณูุงุณูุฉ ูุงูุฉ.", type: 'DATE' },
  { q: "ููุงุฉ ุงูุญุณู ุงูุซุงูู", a: "23 ูููููุฒ 1999", cat: CAT.HISTORY, exp: "ุชููู ูุญูุฏ ุงูุณุงุฏุณ.", type: 'DATE' },
  { q: "ูููุงุฏ ููู ุงูุนูุฏ ูููุงู ุงูุญุณู", a: "8 ูุงู 2003", cat: CAT.HISTORY, exp: "ุงูุงุจู ุงูุจูุฑ ููููู.", type: 'DATE' },
  { q: "ูุฏููุฉ ุงูุฃุณุฑุฉ ุงูุฌุฏูุฏุฉ", a: "2004", cat: CAT.HISTORY, exp: "ุซูุฑุฉ ุญููููุฉ ูููุฑุฃุฉ.", type: 'DATE' },
  { q: "ุงูุฏุณุชูุฑ ุงูุฌุฏูุฏ", a: "ูููููุฒ 2011", cat: CAT.HISTORY, exp: "ุฏุณุชูุฑ ุงูุญููู ูุงูุญุฑูุงุช.", type: 'DATE' },
  { q: "ุนูุฏุฉ ุงููุบุฑุจ ููุงุชุญุงุฏ ุงูุฃูุฑููู", a: "2017", cat: CAT.HISTORY, exp: "ุจุนุฏ ุบูุงุจ ุทููู.", type: 'DATE' },
  
  // --- CONSTITUTION & INSTITUTIONS ---
  { q: "ุนุฏุฏ ุฃุนุถุงุก ูุฌูุณ ุงูููุงุจ", a: "395", cat: CAT.CONST, exp: "ููุชุฎุจูู ุจุงูุงูุชุฑุงุน ุงููุจุงุดุฑ.", type: 'NUMBER' },
  { q: "ุนุฏุฏ ุฃุนุถุงุก ูุฌูุณ ุงููุณุชุดุงุฑูู", a: "120", cat: CAT.CONST, exp: "ููุชุฎุจูู ุจุงูุงูุชุฑุงุน ุบูุฑ ุงููุจุงุดุฑ.", type: 'NUMBER' },
  { q: "ููุชุชุญ ุงูููู ุงูุฏูุฑุฉ ุงูุชุดุฑูุนูุฉ ููู", a: "ุงูุฌูุนุฉ ุงูุซุงููุฉ ูู ุฃูุชูุจุฑ", cat: CAT.CONST, exp: "ุงููุตู 65 ูู ุงูุฏุณุชูุฑ.", type: 'TEXT' },
  { q: "ุฑุฆูุณ ุงููุฌูุณ ุงูุฃุนูู ููุฃูู ูู", a: "ุงูููู", cat: CAT.CONST, exp: "ุงููุตู 54.", type: 'PERSON' },
  { q: "ูุนูู ุงูููู ุฑุฆูุณ ุงูุญูููุฉ ูู", a: "ุงูุญุฒุจ ุงููุชุตุฏุฑ ููุงูุชุฎุงุจุงุช", cat: CAT.CONST, exp: "ุงููุตู 47.", type: 'TEXT' },
  { q: "ุงููุบุงุช ุงูุฑุณููุฉ ูู ุงููุบุฑุจ", a: "ุงูุนุฑุจูุฉ ูุงูุฃูุงุฒูุบูุฉ", cat: CAT.CONST, exp: "ุฏุณุชูุฑ 2011.", type: 'TEXT' },
  
  // --- GEOGRAPHY & AFRICAN FOCUS ---
  { q: "ุนุฏุฏ ุฌูุงุช ุงูููููุฉ (ุงูุชูุณูู ุงูุฅุฏุงุฑู)", a: "12 ุฌูุฉ", cat: CAT.GEO, exp: "ููุฐ 2015.", type: 'NUMBER' },
  { q: "ุฃุทูู ููุฑ ูู ุงููุบุฑุจ", a: "ููุฑ ุฃู ุงูุฑุจูุน", cat: CAT.GEO, exp: "ุญูุงูู 555 ููู.", type: 'TEXT' },
  { q: "ุซุงูู ุฃุทูู ููุฑ ูู ุงููุบุฑุจ", a: "ููุฑ ุณุจู", cat: CAT.GEO, exp: ".", type: 'TEXT' },
  { q: "ููุฑ ูุตุจ ูู ุงูุจุญุฑ ุงูุฃุจูุถ ุงููุชูุณุท", a: "ููุฑ ููููุฉ", cat: CAT.GEO, exp: "ูุตุจ ูุฑุจ ุงูุณุนูุฏูุฉ.", type: 'TEXT' },
  { q: "ููุฑ ููุฑ ูุฑุจ ูุฑุงูุด ููุตุจ ูู ุงููุญูุท", a: "ููุฑ ุชุงูุณููุช", cat: CAT.GEO, exp: ".", type: 'TEXT' },
  { q: "ุฃุนูู ููุฉ ุฌุจููุฉ ูู ุงููุบุฑุจ", a: "ุฌุจู ุชูุจูุงู", cat: CAT.GEO, exp: "4167 ูุชุฑ (ุงูุฃุทูุณ ุงููุจูุฑ).", type: 'TEXT' },
  { q: "ุฌุจู ุชูุจูุงู ููุฌุฏ ูู ุณูุณูุฉ", a: "ุงูุฃุทูุณ ุงููุจูุฑ", cat: CAT.GEO, exp: "ุฃุนูู ุณูุณูุฉ ุฌุจููุฉ.", type: 'TEXT' },
  { q: "ูุญุชู ุงููุบุฑุจ ูู ุฅูุชุงุฌ ุงูููุณูุงุท ุงููุฑุชุจุฉ", a: "ุงูุซุงูุซุฉ ุนุงูููุงู", cat: CAT.GEO, exp: "ูุงูุฃููู ูู ุงูุงุญุชูุงุทู.", type: 'TEXT' },
  { q: "ุนุงุตูุฉ ุฌูุฉ ุงูุดุฑู", a: "ูุฌุฏุฉ", cat: CAT.GEO, exp: ".", type: 'CITY' },
  { q: "ุนุงุตูุฉ ุฌูุฉ ุฏุฑุนุฉ ุชุงูููุงูุช", a: "ุงูุฑุดูุฏูุฉ", cat: CAT.GEO, exp: ".", type: 'CITY' },
  { q: "ุนุงุตูุฉ ุฌูุฉ ุณูุณ ูุงุณุฉ", a: "ุฃูุงุฏูุฑ", cat: CAT.GEO, exp: ".", type: 'CITY' },
  { q: "ุนุงุตูุฉ ุฌูุฉ ุงูุฏุงุฎูุฉ ูุงุฏู ุงูุฐูุจ", a: "ุงูุฏุงุฎูุฉ", cat: CAT.GEO, exp: ".", type: 'CITY' },
  { q: "ุณุฏ ุงููุญุฏุฉ ููุน ุนูู ููุฑ", a: "ูุฑุบุฉ", cat: CAT.GEO, exp: "ุฃูุจุฑ ุณุฏ ูู ุงููุบุฑุจ.", type: 'TEXT' },
  { q: "ุทูู ุงูุณุงุญู ุงููุบุฑุจู", a: "3500 ููู", cat: CAT.GEO, exp: "ุนูู ุงููุงุฌูุชูู.", type: 'TEXT' },
  
  // African Capitals (DGSN Focus)
  { q: "ุนุงุตูุฉ ุงูุณูุบุงู", a: "ุฏูุงุฑ", cat: CAT.GEO, exp: "ุนูุงูุงุช ุชุงุฑูุฎูุฉ ุนูููุฉ.", type: 'CITY' },
  { q: "ุนุงุตูุฉ ููุฑูุชุงููุง", a: "ููุงูุดูุท", cat: CAT.GEO, exp: "ุงูุฌุงุฑุฉ ุงูุฌููุจูุฉ.", type: 'CITY' },
  { q: "ุนุงุตูุฉ ุฅุซููุจูุง (ููุฑ ุงูุงุชุญุงุฏ ุงูุฃูุฑููู)", a: "ุฃุฏูุณ ุฃุจุงุจุง", cat: CAT.GEO, exp: ".", type: 'CITY' },
  { q: "ุนุงุตูุฉ ูุตุฑ (ููุฑ ุงูุฌุงูุนุฉ ุงูุนุฑุจูุฉ)", a: "ุงููุงูุฑุฉ", cat: CAT.GEO, exp: ".", type: 'CITY' },
  { q: "ุนุงุตูุฉ ุบุงูุง", a: "ุฃูุฑุง", cat: CAT.GEO, exp: ".", type: 'CITY' },
  { q: "ุนุงุตูุฉ ูุงูู", a: "ุจุงูุงูู", cat: CAT.GEO, exp: ".", type: 'CITY' },
  { q: "ุนุงุตูุฉ ุณุงุญู ุงูุนุงุฌ (ุงูุงูุชุตุงุฏูุฉ)", a: "ุฃุจูุฏุฌุงู", cat: CAT.GEO, exp: "ุงูุนุงุตูุฉ ุงูุณูุงุณูุฉ ูู ูุงููุณููุฑู.", type: 'CITY' },

  // --- INTERNATIONAL ---
  { q: "ุชุฃุณุณุช ููุธูุฉ ุงูุฃูู ุงููุชุญุฏุฉ", a: "1945", cat: CAT.INTL, exp: "ููุฑูุง ูููููุฑู.", type: 'DATE' },
  { q: "ููุฑ ุงูุงูุชุฑุจูู (Interpol)", a: "ูููู (ูุฑูุณุง)", cat: CAT.INTL, exp: "ุงูููุธูุฉ ุงูุฏูููุฉ ููุดุฑุทุฉ ุงูุฌูุงุฆูุฉ.", type: 'CITY' },
  { q: "ุงูุถู ุงููุบุฑุจ ูุฌุงูุนุฉ ุงูุฏูู ุงูุนุฑุจูุฉ", a: "1958", cat: CAT.INTL, exp: "ุชุฃุณุณุช ุงูุฌุงูุนุฉ ูู 1945.", type: 'DATE' },
  { q: "ุนุฏุฏ ุงูุฏูู ุงูุฃุนุถุงุก ุงูุฏุงุฆููู ูู ูุฌูุณ ุงูุฃูู", a: "5 ุฏูู", cat: CAT.INTL, exp: "ุฃูุฑููุงุ ุฑูุณูุงุ ุงูุตููุ ูุฑูุณุงุ ุจุฑูุทุงููุง.", type: 'NUMBER' },
  { q: "ููุฑ ูุญููุฉ ุงูุนุฏู ุงูุฏูููุฉ", a: "ูุงูุงู (ููููุฏุง)", cat: CAT.INTL, exp: ".", type: 'CITY' },
  { q: "ุงูุฃููู ุงูุนุงู ุงูุญุงูู ููุฃูู ุงููุชุญุฏุฉ", a: "ุฃูุทูููู ุบูุชูุฑูุด", cat: CAT.INTL, exp: "ุจุฑุชุบุงูู ุงูุฌูุณูุฉ.", type: 'PERSON' },
  
  // --- CULTURE & GENERAL ---
  { q: "ูุงุชุจ ุงููุดูุฏ ุงููุทูู ุงููุบุฑุจู", a: "ุนูู ุตููู ุญุณููู", cat: CAT.GEN, exp: "ูุญูู ููู ููุฑุบุงู.", type: 'PERSON' },
  { q: "ูุคูู ูุชุงุจ 'ููุฏูุฉ ุงุจู ุฎูุฏูู'", a: "ุนุจุฏ ุงูุฑุญูู ุจู ุฎูุฏูู", cat: CAT.GEN, exp: "ูุคุณุณ ุนูู ุงูุงุฌุชูุงุน.", type: 'PERSON' },
  { q: "ุฃูู ุฑุฆูุณ ุญูููุฉ ูู ุงููุบุฑุจ ุงููุณุชูู", a: "ูุจุงุฑู ุงูุจูุงู", cat: CAT.GEN, exp: "1955.", type: 'PERSON' },
  { q: "ูุงุฒ ุงูููุชุฎุจ ุงููุบุฑุจู ุจูุฃุณ ุฃูุฑูููุง ุณูุฉ", a: "1976", cat: CAT.GEN, exp: "ุจุฅุซููุจูุง.", type: 'DATE' },
];

// --- ROBUST DISTRACTOR POOLS (Type Safe) ---
const POOLS = {
  YEARS: ["1880", "1906", "1912", "1944", "1953", "1955", "1956", "1958", "1960", "1969", "1975", "1979", "1999", "2003", "2010", "2011", "2020"],
  LEGAL: ["24 ุณุงุนุฉ", "48 ุณุงุนุฉ", "96 ุณุงุนุฉ", "ุณูุฉ ูุงุญุฏุฉ", "5 ุณููุงุช", "10 ุณููุงุช", "15 ุณูุฉ", "20 ุณูุฉ", "30 ุณูุฉ", "ุงููุคุจุฏ"],
  NUMBERS: ["12", "50", "120", "395", "5", "7", "3", "1", "19", "177", "15"],
  CITIES: ["ุงูุฑุจุงุท", "ุงูุฏุงุฑ ุงูุจูุถุงุก", "ูุฑุงูุด", "ูุงุณ", "ุทูุฌุฉ", "ูุฌุฏุฉ", "ุงูุนููู", "ุงูุฏุงุฎูุฉ", "ุฃูุงุฏูุฑ", "ุงูุฑุดูุฏูุฉ", "ุจูู ููุงู", "ุฏูุงุฑ", "ููุงูุดูุท", "ุงููุงูุฑุฉ", "ุฃุฏูุณ ุฃุจุงุจุง", "ูุฏุฑูุฏ", "ุจุงุฑูุณ"],
  RANKS: ["ุญุงุฑุณ ุฃูู", "ููุฏู ุดุฑุทุฉ", "ุถุงุจุท ุฃูู", "ุนููุฏ ุดุฑุทุฉ", "ุนููุฏ ุฅููููู", "ูุฑุงูุจ ุนุงู", "ูุงูู ุฃูู"],
  PERSONS: ["ูุญูุฏ ุงูุฎุงูุณ", "ุงูุญุณู ุงูุซุงูู", "ูุญูุฏ ุงูุณุงุฏุณ", "ุนุจุฏ ุงููุฑูู ุงูุฎุทุงุจู", "ููุญุง ูุญูู ุงูุฒูุงูู", "ุนูุงู ุงููุงุณู", "ุฃุญูุฏ ุจูุงูุฑูุฌ", "ุนุจุฏ ุงููู ุฅุจุฑุงููู", "ูุจุงุฑู ุงูุจูุงู", "ุฃูุทูููู ุบูุชูุฑูุด"],
  TEXT: ["ุงูุฌูุนุฉ ุงูุฃููู ูู ุฃูุชูุจุฑ", "ุงูุฃุบูุจูุฉ", "ุงููุนุงุฑุถุฉ", "ุงููุฑูุณูุฉ", "ุงูุฅูุฌููุฒูุฉ", "ููุฑ ููููุฉ", "ููุฑ ุชุงูุณููุช", "ุฌุจู ุงูุนูุงุดู", "ุฌุจู ุชูุจูุงู", "ุงูุฃุทูุณ ุงููุชูุณุท"]
};

function shuffleArray<T>(array: T[]): T[] {
  const arr = [...array];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function createId(): string {
    return `gen-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
}

// INTELLIGENT DISTRACTOR FINDER (STRICT TYPING)
function getSmartDistractors(correct: string, type: FactType): string[] {
    // 1. Try to find answers from the same TYPE in RAW_DATA
    let candidates = RAW_DATA
        .filter(item => item.type === type && item.a !== correct)
        .map(item => item.a);
    
    // 2. Supplement with POOLS if not enough real data
    if (candidates.length < 3) {
        if (type === 'DATE') candidates = [...candidates, ...POOLS.YEARS];
        else if (type === 'NUMBER') candidates = [...candidates, ...POOLS.NUMBERS];
        else if (type === 'LAW') candidates = [...candidates, ...POOLS.LEGAL];
        else if (type === 'CITY') candidates = [...candidates, ...POOLS.CITIES];
        else if (type === 'PERSON') candidates = [...candidates, ...POOLS.PERSONS];
        else candidates = [...candidates, ...POOLS.TEXT];
    }

    // 3. Filter out correct answer and duplicates
    candidates = [...new Set(candidates)].filter(a => a !== correct);
    
    // 4. Shuffle and pick 3
    return shuffleArray(candidates).slice(0, 3);
}

export const generateBulkQuestions = (): Question[] => {
    const questions: Question[] = [];

    // GENERATION STRATEGY: 
    // 1. Direct Questions (The Standard)
    RAW_DATA.forEach(item => {
        const distractors = getSmartDistractors(item.a, item.type);
        const options = shuffleArray([item.a, ...distractors]);
        
        questions.push({
            id: createId(),
            text: `${item.q}ุ`,
            options: options,
            correctAnswerIndex: options.indexOf(item.a),
            explanation: `โ ุงูุฌูุงุจ ุงูุตุญูุญ: ${item.a}.\n๐ ูุนูููุฉ: ${item.exp}`,
            category: item.cat
        });
    });

    // 2. True/False Questions (Robust)
    RAW_DATA.forEach(item => {
        // Variation A: The Truth
        questions.push({
            id: createId(),
            text: `ุตุญูุญ ุฃู ุฎุทุฃ: ${item.q} ูู ${item.a}ุ`,
            options: ["ุตุญูุญ", "ุฎุทุฃ"],
            correctAnswerIndex: 0,
            explanation: `โ ุตุญูุญ.\n๐ ${item.exp}`,
            category: item.cat
        });

        // Variation B: The Lie (Logic: Swap with same TYPE)
        if (Math.random() > 0.6) {
            const wrong = getSmartDistractors(item.a, item.type)[0] || "ูููุฉ ูุบุงูุฑุฉ";
            questions.push({
                id: createId(),
                text: `ุตุญูุญ ุฃู ุฎุทุฃ: ${item.q} ูู ${wrong}ุ`,
                options: ["ุตุญูุญ", "ุฎุทุฃ"],
                correctAnswerIndex: 1,
                explanation: `โ ุฎุทุฃ. ุงูุตูุงุจ ูู: ${item.a}.\n๐ ${item.exp}`,
                category: item.cat
            });
        }
    });

    return shuffleArray(questions);
};